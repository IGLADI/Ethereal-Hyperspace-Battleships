
CREATE DATABASE IF NOT EXISTS `etherealhyperspacebattleshipsdb` /*!40100 DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci */;
USE `etherealhyperspacebattleshipsdb`;

CREATE TABLE IF NOT EXISTS `building` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `building_id` int(11) NOT NULL,
  `building_name` varchar(255) NOT NULL,
  `building_cost` int(11) NOT NULL,
  `upgrade_cost` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `building_id` (`building_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;




CREATE TABLE IF NOT EXISTS `cargo` (
  `cargo_id` int(11) NOT NULL AUTO_INCREMENT,
  `module_id` int(11) NOT NULL,
  `space` int(11) NOT NULL,
  PRIMARY KEY (`cargo_id`),
  KEY `module_id` (`module_id`),
  CONSTRAINT `cargo_ibfk_1` FOREIGN KEY (`module_id`) REFERENCES `module` (`module_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;



CREATE TABLE IF NOT EXISTS `guild` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `guild_id` int(11) NOT NULL,
  `guild_name` varchar(255) NOT NULL,
  `guild_description` varchar(255) NOT NULL,
  `owned_buildings` text NOT NULL,
  `owned_planets` text NOT NULL,
  `members` text NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `guild_id` (`guild_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;



CREATE TABLE IF NOT EXISTS `location` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `location_id` int(11) NOT NULL,
  `xpos` int(11) NOT NULL,
  `ypos` int(11) NOT NULL,
  `location_description` varchar(255) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `location_id` (`location_id`),
  UNIQUE KEY `xpos` (`xpos`) USING BTREE,
  UNIQUE KEY `ypos` (`ypos`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;




CREATE TABLE IF NOT EXISTS `module` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `module_id` int(11) NOT NULL,
  `module_level` int(11) NOT NULL,
  `module_name` varchar(255) NOT NULL,
  `base_upgrade_code` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `module_id` (`module_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;




CREATE TABLE IF NOT EXISTS `planet` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `planet_id` int(11) NOT NULL,
  `planet_type` varchar(255) NOT NULL,
  `location_id` int(11) NOT NULL,
  `guild_id` int(11) NOT NULL,
  `resource_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `planet_id` (`planet_id`),
  KEY `FK_location` (`location_id`) USING BTREE,
  KEY `FK_guild` (`guild_id`) USING BTREE,
  KEY `FK_resource` (`resource_id`) USING BTREE,
  CONSTRAINT `FK_guild_planet` FOREIGN KEY (`guild_id`) REFERENCES `guild` (`guild_id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `FK_location_planet` FOREIGN KEY (`location_id`) REFERENCES `location` (`location_id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `FK_resource_planet` FOREIGN KEY (`resource_id`) REFERENCES `resource` (`resource_id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;


CREATE TABLE IF NOT EXISTS `player` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `player_id` int(11) NOT NULL,
  `player_name` varchar(255) NOT NULL,
  `Discord_id` int(19) NOT NULL,
  `money` int(255) NOT NULL DEFAULT 0,
  `xpos` int(11) NOT NULL,
  `ypos` int(11) NOT NULL,
  `damage` int(11) NOT NULL,
  `ship` int(11) NOT NULL,
  `fuel` int(11) NOT NULL,
  `player_speed` int(11) NOT NULL,
  `class` enum('Dwarf','Droid','Martian') NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `player_id` (`player_id`),
  KEY `FK_xpos_player` (`xpos`),
  KEY `FK_ypos_player` (`ypos`),
  CONSTRAINT `FK_xpos_player` FOREIGN KEY (`xpos`) REFERENCES `location` (`xpos`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `FK_ypos_player` FOREIGN KEY (`ypos`) REFERENCES `location` (`ypos`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;




CREATE TABLE IF NOT EXISTS `resource` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `resource_id` int(11) NOT NULL,
  `description` varchar(255) NOT NULL,
  `resource_name` varchar(255) NOT NULL,
  `drop_rate` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `resource_id` (`resource_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;



CREATE TABLE IF NOT EXISTS `ship` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `ship_id` int(11) NOT NULL,
  `ship_name` varchar(255) NOT NULL,
  `location_id` int(11) NOT NULL,
  `module_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `ship_id` (`ship_id`),
  KEY `FK_location_ship` (`location_id`) USING BTREE,
  KEY `FK_module` (`module_id`) USING BTREE,
  CONSTRAINT `FK_location_ship` FOREIGN KEY (`location_id`) REFERENCES `location` (`location_id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `FK_module_ship` FOREIGN KEY (`module_id`) REFERENCES `module` (`module_id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;



CREATE TABLE IF NOT EXISTS `speed` (
  `speed_id` int(11) NOT NULL AUTO_INCREMENT,
  `module_id` int(11) NOT NULL,
  `speed` float NOT NULL,
  PRIMARY KEY (`speed_id`),
  KEY `FK_moudule_speed` (`module_id`),
  CONSTRAINT `FK_moudule_speed` FOREIGN KEY (`module_id`) REFERENCES `module` (`module_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;



